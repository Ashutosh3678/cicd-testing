name: Deploy node js app to ec2
on:
  push:
    branches
      - master

jobs:
  deploy:
  runs-on: ubuntu-latest
  steps:
    -name: Checkout code
    uses: actions/checkout@v4

    -name: deploy via ssh
    uses: appleboy/ssh-action@v1.0.3
    with:
      host: ${{secrets.SSH_HOST}}
      username: root
      key: ${{secrets.SSH_KEY}}
      script: |
        cd /home/ubuntu/cicd-testing
        git pull
        docker compose up -d --build